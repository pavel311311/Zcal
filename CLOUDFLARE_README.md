# ğŸŒ Cloudflare éƒ¨ç½²å®Œæ•´æ–¹æ¡ˆ

## ğŸ“‘ æ–‡æ¡£æ€»è§ˆ

æœ¬é¡¹ç›®å·²ä¸ºCloudflareéƒ¨ç½²åšå¥½äº†å®Œæ•´å‡†å¤‡ã€‚ä»¥ä¸‹æ˜¯å…³é”®æ–‡æ¡£å’Œæ–‡ä»¶ï¼š

### ğŸ“š å¿…è¯»æ–‡æ¡£ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

| ä¼˜å…ˆçº§ | æ–‡æ¡£ | ç”¨é€” |
|--------|------|------|
| ğŸ”´ å¿…è¯» | `CLOUDFLARE_QUICK_START.md` | 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹ |
| ğŸ”´ å¿…è¯» | `docs/CLOUDFLARE_DEPLOYMENT_GUIDE.md` | å®Œæ•´éƒ¨ç½²æŒ‡å— |
| ğŸŸ¡ å‚è€ƒ | `CLOUDFLARE_DEPLOYMENT_SUMMARY.md` | æ¶æ„å’ŒæŠ€æœ¯æ€»ç»“ |
| ğŸŸ¡ å‚è€ƒ | `DEPLOYMENT_CHECKLIST.md` | éƒ¨ç½²éªŒè¯æ¸…å• |

### ğŸ’» æ ¸å¿ƒé…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `wrangler.toml` | Workersé…ç½®ï¼ˆéœ€å¡«å…¥Account IDã€API Tokenï¼‰ |
| `wrangler-pages.toml` | Pagesæ„å»ºé…ç½® |
| `src/backend/worker.js` | Workersä¸»å…¥å£ |
| `src/frontend/vite.config.js` | å‰ç«¯æ„å»ºä¼˜åŒ– |

### ğŸ”§ éƒ¨ç½²è„šæœ¬

| è„šæœ¬ | å¹³å° | è¯´æ˜ |
|------|------|------|
| `scripts/deploy-cloudflare.ps1` | Windows | å…¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ |
| `scripts/deploy-cloudflare.sh` | Linux/macOS | å…¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ |

### ğŸ¤– è‡ªåŠ¨åŒ–

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.github/workflows/deploy-cloudflare.yml` | GitHub Actionsè‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥ï¼‰

### æ­¥éª¤1ï¼šå®‰è£…å·¥å…·
```powershell
npm install -g wrangler
wrangler login
```

### æ­¥éª¤2ï¼šè·å–Cloudflareå‡­è¯
1. è®¿é—® https://dash.cloudflare.com
2. è·å–Account ID
3. åˆ›å»ºAPI Tokenï¼ˆæƒé™ï¼šZone:Read, Zone:Edit, Account:Read, Workers:Write, Pages:Writeï¼‰

### æ­¥éª¤3ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬
```powershell
cd c:\Users\Brent\Desktop\code\Zcal
.\scripts\deploy-cloudflare.ps1
```

è„šæœ¬ä¼šæç¤ºè¾“å…¥ï¼š
- Cloudflare Account ID
- Cloudflare API Token  
- ä½ çš„åŸŸå

---

## ğŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶æ¸…å•

### é…ç½®æ–‡ä»¶ï¼ˆ4ä¸ªï¼‰
- âœ… `wrangler.toml` - Workersé…ç½®
- âœ… `wrangler-pages.toml` - Pagesæ„å»ºé…ç½®
- âœ… `src/frontend/.env.cloudflare` - å‰ç«¯ç¯å¢ƒå˜é‡
- âœ… `src/backend/.env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹

### ä»£ç æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰
- âœ… `src/backend/worker.js` - Workersä¸»å…¥å£ï¼ˆ370è¡Œï¼‰
- âœ… `src/backend/api/calculator.js` - é˜»æŠ—è®¡ç®—APIï¼ˆ80è¡Œï¼‰
- âœ… `src/backend/api/form.js` - è¡¨å•å®šä¹‰APIï¼ˆ78è¡Œï¼‰
- âœ… `src/backend/api/material.js` - ææ–™åº“APIï¼ˆ92è¡Œï¼‰
- âœ… `src/frontend/src/config/env.js` - ç¯å¢ƒé…ç½®ï¼ˆ21è¡Œï¼‰

### éƒ¨ç½²è„šæœ¬ï¼ˆ2ä¸ªï¼‰
- âœ… `scripts/deploy-cloudflare.sh` - Linux/macOSè„šæœ¬ï¼ˆ89è¡Œï¼‰
- âœ… `scripts/deploy-cloudflare.ps1` - Windowsè„šæœ¬ï¼ˆ88è¡Œï¼‰

### CI/CDï¼ˆ1ä¸ªï¼‰
- âœ… `.github/workflows/deploy-cloudflare.yml` - GitHub Actionså·¥ä½œæµï¼ˆ67è¡Œï¼‰

### æ–‡æ¡£ï¼ˆ4ä¸ªï¼‰
- âœ… `docs/CLOUDFLARE_DEPLOYMENT_GUIDE.md` - å®Œæ•´æŒ‡å—ï¼ˆ380è¡Œï¼‰
- âœ… `CLOUDFLARE_DEPLOYMENT_SUMMARY.md` - æ¶æ„æ€»ç»“ï¼ˆ210è¡Œï¼‰
- âœ… `CLOUDFLARE_QUICK_START.md` - å¿«é€Ÿå‚è€ƒï¼ˆ180è¡Œï¼‰
- âœ… `DEPLOYMENT_CHECKLIST.md` - éªŒè¯æ¸…å•ï¼ˆ380è¡Œï¼‰

### æ›´æ–°æ–‡ä»¶ï¼ˆ2ä¸ªï¼‰
- âœ… `src/backend/package.json` - æ·»åŠ wranglerä¾èµ–
- âœ… `src/frontend/package.json` - æ·»åŠ Pageséƒ¨ç½²å‘½ä»¤
- âœ… `src/frontend/vite.config.js` - ä¼˜åŒ–æ„å»ºé…ç½®

**æ€»è®¡ï¼š21ä¸ªæ–‡ä»¶ï¼Œçº¦2000è¡Œä»£ç å’Œæ–‡æ¡£**

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Cloudflare ç”Ÿæ€ç³»ç»Ÿ                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Cloudflare Pagesâ”‚              â”‚ Cloudflare Workersâ”‚ â”‚
â”‚  â”‚   (å‰ç«¯æ‰˜ç®¡)      â”‚              â”‚   (APIæœåŠ¡)      â”‚  â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚  â”‚
â”‚  â”‚ â€¢ Vue 3åº”ç”¨      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ é˜»æŠ—è®¡ç®—      â”‚  â”‚
â”‚  â”‚ â€¢ è‡ªåŠ¨éƒ¨ç½²       â”‚  HTTPS/CORS  â”‚ â€¢ è¡¨å•ç®¡ç†      â”‚  â”‚
â”‚  â”‚ â€¢ å…¨çƒCDN        â”‚              â”‚ â€¢ ææ–™åº“æŸ¥è¯¢    â”‚  â”‚
â”‚  â”‚ â€¢ Gité›†æˆ        â”‚              â”‚ â€¢ KVç¼“å­˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                     â”‚           â”‚
â”‚         â”‚                                     â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           è‡ªå®šä¹‰åŸŸå + SSL/TLS                    â”‚   â”‚
â”‚  â”‚         (ç”±Cloudflareç®¡ç†å’Œä¿æŠ¤)                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ å…³é”®ç‰¹æ€§

### âœ¨ å‰ç«¯ï¼ˆPagesï¼‰
- Vue 3 SPAåº”ç”¨
- è‡ªåŠ¨éƒ¨ç½²ï¼ˆGité›†æˆï¼‰
- å…¨çƒCDNç¼“å­˜
- æ€§èƒ½ä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ã€å‹ç¼©ï¼‰
- è‡ªåŠ¨HTTPS/SSL

### âš¡ åç«¯ï¼ˆWorkersï¼‰
- æ— æœåŠ¡å™¨è®¡ç®—
- è¾¹ç¼˜éƒ¨ç½²ï¼ˆæ¯«ç§’çº§å“åº”ï¼‰
- KVç¼“å­˜å­˜å‚¨
- è‡ªåŠ¨æ‰©å±•
- CORSå·²é…ç½®

### ğŸ”’ å®‰å…¨ç‰¹æ€§
- DDoSé˜²æŠ¤ï¼ˆåŒ…å«ï¼‰
- WAFè§„åˆ™ï¼ˆå¯é€‰ï¼‰
- Botç®¡ç†ï¼ˆå¯é€‰ï¼‰
- Rate limitingï¼ˆå¯é€‰ï¼‰
- è‡ªåŠ¨å¤‡ä»½

### ğŸ’° æˆæœ¬ä¼˜åŠ¿
- Pagesï¼šå®Œå…¨å…è´¹
- Workersï¼šæŒ‰ä½¿ç”¨ä»˜è´¹ï¼ˆ100ä¸‡è¯·æ±‚=$0.5ï¼‰
- KVå­˜å‚¨ï¼šæŒ‰å®¹é‡ä»˜è´¹ï¼ˆ$0.5/GBï¼‰
- åŸŸåï¼šå¯ä½¿ç”¨å…è´¹.tkæˆ–è´­ä¹°

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | é¢„æœŸå€¼ |
|------|--------|
| é¡µé¢åŠ è½½æ—¶é—´ | < 2ç§’ |
| APIå“åº”æ—¶é—´ | < 100ms |
| CDNç¼“å­˜å‘½ä¸­ç‡ | > 80% |
| å¯ç”¨æ€§ | 99.99% |
| DDoSé˜²æŠ¤ | è‡ªåŠ¨ |

---

## ğŸ” éƒ¨ç½²åæ£€æŸ¥

### éªŒè¯éƒ¨ç½²æˆåŠŸ
```bash
# æ£€æŸ¥Workers
curl https://api.example.com/api/health

# æ£€æŸ¥Pages
curl https://example.com

# æŸ¥çœ‹æ—¥å¿—
wrangler tail
```

### å¸¸è§é—®é¢˜æ’æŸ¥
1. **APIæ— æ³•è®¿é—®** â†’ æ£€æŸ¥DNSå’Œzone_id
2. **å‰ç«¯æ— æ³•è°ƒç”¨API** â†’ æ£€æŸ¥CORSé…ç½®
3. **é¡µé¢åŠ è½½æ…¢** â†’ æ£€æŸ¥ç¼“å­˜è§„åˆ™
4. **éƒ¨ç½²å¤±è´¥** â†’ æ£€æŸ¥API Tokenæƒé™

---

## ğŸ“ æ”¯æŒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- Cloudflare API: https://developers.cloudflare.com/api
- WorkersæŒ‡å—: https://developers.cloudflare.com/workers
- Pagesæ–‡æ¡£: https://developers.cloudflare.com/pages
- Wrangler CLI: https://developers.cloudflare.com/workers/cli-wrangler

### ç¤¾åŒºèµ„æº
- Workersç¤ºä¾‹: https://github.com/cloudflare/workers-sdk
- è®¨è®ºè®ºå›: https://community.cloudflare.com
- é—®é¢˜åé¦ˆ: https://github.com/pavel311311/Zcal/issues

---

## ğŸ¯ åç»­ä¼˜åŒ–å»ºè®®

### ç¬¬1é˜¶æ®µï¼ˆç«‹å³ï¼‰
- âœ… éƒ¨ç½²åˆ°Cloudflare
- âœ… é…ç½®è‡ªå®šä¹‰åŸŸå
- âœ… æµ‹è¯•åŠŸèƒ½å®Œæ•´æ€§

### ç¬¬2é˜¶æ®µï¼ˆ1å‘¨å†…ï¼‰
- â³ å¯ç”¨ç¼“å­˜è§„åˆ™
- â³ é…ç½®åˆ†æç›‘æ§
- â³ ä¼˜åŒ–Lighthouseè¯„åˆ†

### ç¬¬3é˜¶æ®µï¼ˆ1ä¸ªæœˆå†…ï¼‰
- â³ å¯ç”¨WAFè§„åˆ™
- â³ é…ç½®æ—¥å¿—å­˜å‚¨
- â³ æ€§èƒ½åŸºå‡†æµ‹è¯•

### ç¬¬4é˜¶æ®µï¼ˆé•¿æœŸï¼‰
- â³ å¯ç”¨Botç®¡ç†
- â³ å®ç°æ›´é«˜çº§ç¼“å­˜
- â³ A/Bæµ‹è¯•åŠŸèƒ½

---

## ğŸ“Š æˆæœ¬ä¼°ç®—ï¼ˆæœˆåº¦ï¼‰

### å°è§„æ¨¡éƒ¨ç½²ï¼ˆ< 100ä¸‡è¯·æ±‚ï¼‰
```
Pages: $0
Workers: ~$0.50
KVå­˜å‚¨: $0
æ€»è®¡: ~$0.50/æœˆ
```

### ä¸­ç­‰è§„æ¨¡éƒ¨ç½²ï¼ˆ1000ä¸‡è¯·æ±‚ï¼‰
```
Pages: $0
Workers: ~$5
KVå­˜å‚¨: $1
æ€»è®¡: ~$6/æœˆ
```

### å¤§è§„æ¨¡éƒ¨ç½²ï¼ˆ1äº¿è¯·æ±‚+ï¼‰
```
Pages: $0
Workers: ~$50
KVå­˜å‚¨: ~$5
æ€»è®¡: ~$55/æœˆ
```

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### å¯¹äºåˆå­¦è€…
1. é˜…è¯» `CLOUDFLARE_QUICK_START.md`
2. è¿è¡Œéƒ¨ç½²è„šæœ¬
3. è®¿é—®éƒ¨ç½²çš„URLéªŒè¯

### å¯¹äºå¼€å‘è€…
1. å­¦ä¹  `src/backend/worker.js` çš„APIè®¾è®¡
2. ä¿®æ”¹ `src/backend/api/*.js` ä¸­çš„è®¡ç®—é€»è¾‘
3. ç ”ç©¶ç¼“å­˜ç­–ç•¥ï¼ˆKVå­˜å‚¨ï¼‰

### å¯¹äºè¿ç»´
1. ç ”ç©¶ `.github/workflows/deploy-cloudflare.yml` çš„CI/CD
2. é…ç½®ç›‘æ§å’Œå‘Šè­¦
3. å®æ–½å¤‡ä»½å’Œæ¢å¤è®¡åˆ’

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ”¹è¿›å»ºè®®
- æ€§èƒ½ä¼˜åŒ–
- å®‰å…¨åŠ å›º
- åŠŸèƒ½æ‰©å±•
- æ–‡æ¡£å®Œå–„

### åé¦ˆæ¸ é“
- GitHub Issues
- Pull Requests
- è®¨è®ºè®ºå›

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| 1.0 | 2025-12-06 | åˆå§‹éƒ¨ç½²æ–¹æ¡ˆå®Œæˆ |

---

**ğŸ‰ é¡¹ç›®å·²å®Œå…¨å‡†å¤‡å¥½éƒ¨ç½²åˆ°Cloudflareï¼**

æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒç›¸å…³æ–‡æ¡£æˆ–æäº¤Issueã€‚ç¥éƒ¨ç½²é¡ºåˆ©ï¼

---

*ç”±GitHub Copilotç”Ÿæˆ*  
*æœ€åæ›´æ–°: 2025å¹´12æœˆ6æ—¥*
