<template>
  <div class="calculation-controls">
    <h3>ğŸ¸è®¡ç®—æ¨¡å‹</h3>
    
    <!-- è®¡ç®—æŒ‰é’® -->
    <button 
      :disabled="!isFormValid || isLoading" 
      @click="submitCalculation" 
      class="calculate-btn"
    >
      <span v-if="!isLoading">è®¡ç®—</span>
      <span v-else>è®¡ç®—ä¸­...</span>
    </button>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { useCalculationStore } from '../stores/calculatorStore'

const store = useCalculationStore()

// è®¡ç®—å±æ€§ï¼šè¡¨å•æ˜¯å¦æœ‰æ•ˆ
const isFormValid = computed(() => {
  return store.isFormValid
})

// è®¡ç®—å±æ€§ï¼šæ˜¯å¦æ­£åœ¨åŠ è½½
const isLoading = computed(() => {
  return store.isLoading
})

// æäº¤è®¡ç®—
const submitCalculation = async () => {
  try {
    await store.submitCalculation()
  } catch (error) {
    console.error('è®¡ç®—å¤±è´¥:', error)
    // é”™è¯¯ä¿¡æ¯å·²ç»åœ¨storeä¸­è®¾ç½®
  }
}

</script>

